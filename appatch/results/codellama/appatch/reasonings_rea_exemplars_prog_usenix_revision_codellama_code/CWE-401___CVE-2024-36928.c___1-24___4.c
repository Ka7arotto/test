1 static void qeth_osa_set_output_queues(struct qeth_card *card, bool single)
3 	unsigned int max = single ? 1 : card->dev->num_tx_queues;
5 	if (card->qdio.no_out_queues == max)
6 		return;
8 	if (atomic_read(&card->qdio.state) != QETH_QDIO_UNINITIALIZED)
9 		qeth_free_qdio_queues(card);
11 	if (max == 1 && card->qdio.do_prio_queueing != QETH_PRIOQ_DEFAULT)
12 		dev_info(&card->gdev->dev, "Priority Queueing not supported\n");
14 	card->qdio.no_out_queues = max;

7282 static void qeth_free_qdio_queues(struct qeth_card *card)
7284 	int i, j;
7286 	qeth_free_cq(card);
7288 	if (atomic_xchg(&card->qdio.state, QETH_QDIO_UNINITIALIZED) ==


7326 static void qeth_free_cq(struct qeth_card *card)
7328 	if (card->qdio.c_q) {
7329 		qeth_free_qdio_queue(card->qdio.c_q);
7330 		card->qdio.c_q = NULL;


7282 static void qeth_free_qdio_queues(struct qeth_card *card)
7284 	int i, j;
7286 	qeth_free_cq(card);
7288 	if (atomic_xchg(&card->qdio.state, QETH_QDIO_UNINITIALIZED) ==
