c
int ip6_output(struct net *net, struct sock *sk, struct sk_buff *skb)
{
    // ... (other code)
    struct inet6_dev *idev = ip6_dst_idev(skb_dst(skb));

    if (idev) {
        if (unlikely(READ_ONCE(idev->cnf.disable_ipv6))) {
            // ...
        } 
        // ... possibly other operations that depend on a valid 'idev' 
    } else {
        // ... handle the case where 'idev' is NULL 
    }
    // ... 
}
