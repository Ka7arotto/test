diff
--- a/setImage1.c
+++ b/setImage1.c
@@ -20,6 +20,9 @@
 20 	    if (err >= limit)
 21               rows[nrows++] = br + bpr*sy;
+> 	    if (nrows >= sizeof(rows)/sizeof(rows[0]))
+> 		return -1;
+> 
 