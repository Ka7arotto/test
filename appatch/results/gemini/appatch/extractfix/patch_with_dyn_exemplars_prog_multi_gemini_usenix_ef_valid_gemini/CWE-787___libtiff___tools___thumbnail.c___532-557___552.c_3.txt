diff
--- a/setImage1.c
+++ b/setImage1.c
@@ -20,6 +20,10 @@
 20 	    if (err >= limit)
 21               rows[nrows++] = br + bpr*sy;
+>         if (nrows >= tnh)
+> 	    break;
+> 
+> 
 