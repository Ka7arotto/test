c
static void qeth_osa_set_output_queues(struct qeth_card *card, bool single) {
    unsigned int max = single ? 1 : card->dev->num_tx_queues;
    // ... (rest of the code)
    atomic_set(&card->qdio.no_out_queues, max); // Atomically update
}
