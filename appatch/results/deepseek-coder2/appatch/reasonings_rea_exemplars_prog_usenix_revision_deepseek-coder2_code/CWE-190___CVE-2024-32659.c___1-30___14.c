1 static INLINE BOOL overlapping(const BYTE* pDstData, UINT32 nXDst, UINT32 nYDst, UINT32 nDstStep,
2                                UINT32 dstBytesPerPixel, const BYTE* pSrcData, UINT32 nXSrc,
3                                UINT32 nYSrc, UINT32 nSrcStep, UINT32 srcBytesPerPixel,
4                                UINT32 nWidth, UINT32 nHeight)
6 	const BYTE* pDstStart = &pDstData[nXDst * dstBytesPerPixel + nYDst * nDstStep];

1709 BOOL freerdp_image_copy(BYTE* pDstData, DWORD DstFormat, UINT32 nDstStep, UINT32 nXDst,
1710                         UINT32 nYDst, UINT32 nWidth, UINT32 nHeight, const BYTE* pSrcData,
1711                         DWORD SrcFormat, UINT32 nSrcStep, UINT32 nXSrc, UINT32 nYSrc,
1712                         const gdiPalette* palette, UINT32 flags)
1714 	const UINT32 dstByte = FreeRDPGetBytesPerPixel(DstFormat);
1715 	const UINT32 srcByte = FreeRDPGetBytesPerPixel(SrcFormat);
1717 	if ((nHeight > INT32_MAX) || (nWidth > INT32_MAX))
1718 		return FALSE;
1720 	if (!pDstData || !pSrcData)
1721 		return FALSE;
1723 	if (nDstStep == 0)
1724 		nDstStep = nWidth * FreeRDPGetBytesPerPixel(DstFormat);
1726 	if (nSrcStep == 0)
1727 		nSrcStep = nWidth * FreeRDPGetBytesPerPixel(SrcFormat);
1729 	const BOOL ovl = overlapping(pDstData, nXDst, nYDst, nDstStep, dstByte, pSrcData, nXSrc, nYSrc,
