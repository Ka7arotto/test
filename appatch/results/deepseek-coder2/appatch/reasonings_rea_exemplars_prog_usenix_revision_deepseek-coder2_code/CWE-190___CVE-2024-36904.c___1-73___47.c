1 static INLINE BOOL overlapping(const BYTE* pDstData, UINT32 nXDst, UINT32 nYDst, UINT32 nDstStep,
2                                UINT32 dstBytesPerPixel, const BYTE* pSrcData, UINT32 nXSrc,
3                                UINT32 nYSrc, UINT32 nSrcStep, UINT32 srcBytesPerPixel,
4                                UINT32 nWidth, UINT32 nHeight)
6 	const BYTE* pDstStart = &pDstData[nXDst * dstBytesPerPixel + nYDst * nDstStep];

1315 BOOL freerdp_image_copy(BYTE* pDstData, DWORD DstFormat, UINT32 nDstStep, UINT32 nXDst,
1316                         UINT32 nYDst, UINT32 nWidth, UINT32 nHeight, const BYTE* pSrcData,
1317                         DWORD SrcFormat, UINT32 nSrcStep, UINT32 nXSrc, UINT32 nYSrc,
1318                         const gdiPalette* palette, UINT32 flags)
1320 	const UINT32 dstByte = FreeRDPGetBytesPerPixel(DstFormat);
1321 	const UINT32 srcByte = FreeRDPGetBytesPerPixel(SrcFormat);
1323 	if ((nHeight > INT32_MAX) || (nWidth > INT32_MAX))
1324 		return FALSE;
1326 	if (!pDstData || !pSrcData)
1327 		return FALSE;
1329 	if (nDstStep == 0)
1330 		nDstStep = nWidth * FreeRDPGetBytesPerPixel(DstFormat);
1332 	if (nSrcStep == 0)
1333 		nSrcStep = nWidth * FreeRDPGetBytesPerPixel(SrcFormat);
1335 	const BOOL ovl = overlapping(pDstData, nXDst, nYDst, nDstStep, dstByte, pSrcData, nXSrc, nYSrc,
