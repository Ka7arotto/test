c
    // In gpio_chardev_data structure definition
    struct rcu_head rcu;

    // In gpio_chrdev_release
    call_rcu(&cdev->rcu, free_watched_lines_rcu);

    // RCU callback function
    void free_watched_lines_rcu(struct rcu_head *head) {
        struct gpio_chardev_data *cdev = container_of(head, struct gpio_chardev_data, rcu);
        bitmap_free(cdev->watched_lines);
    }

    // Before accessing watched_lines elsewhere in the code
    rcu_read_lock();
    if (cdev->watched_lines) {
        // Access watched_lines
    }
    rcu_read_unlock();
    