c
    // In gpio_chardev_data structure definition
    bool is_watched_lines_freed;

    // In gpio_chrdev_release
    bitmap_free(cdev->watched_lines);
    cdev->is_watched_lines_freed = true;

    // Before accessing watched_lines elsewhere in the code
    if (!cdev->is_watched_lines_freed) {
        // Access watched_lines
    }
    