diff
7  hdev = devm_kzalloc(&pdev->dev, sizeof(*hdev), GFP_KERNEL);
8  if (!hdev)
+    goto err_alloc;
11  hdev->pdev = pdev;
...
+ err_alloc:
+   return -ENOMEM;
