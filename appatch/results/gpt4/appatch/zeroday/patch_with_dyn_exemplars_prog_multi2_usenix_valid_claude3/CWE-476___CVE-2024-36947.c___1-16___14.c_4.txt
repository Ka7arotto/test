diff
<     simple_recursive_removal(dir, NULL);
---
>     if (dir && !IS_ERR(dir)) {
>         simple_recursive_removal(dir, NULL);
>     } else if (IS_ERR(dir)) {
>         return PTR_ERR(dir);
>     }
