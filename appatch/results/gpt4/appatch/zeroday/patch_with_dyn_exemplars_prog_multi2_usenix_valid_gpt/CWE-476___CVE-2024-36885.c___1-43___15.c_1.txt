diff
5     fw->func = func;
6     fw->name = name;
7     fw->device = device;
8     fw->len = len;
+9    if (!fw->func)
+10       return -EINVAL;
10    switch (fw->func->type) {
