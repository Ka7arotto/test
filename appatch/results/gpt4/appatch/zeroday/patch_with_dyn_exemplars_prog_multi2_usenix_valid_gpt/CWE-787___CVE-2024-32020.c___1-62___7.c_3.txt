c
// Add bounds checking before using strbuf_add or similar functions
size_t required_size = src->len + dest->len;
if (required_size > strbuf_avail(&realpath)) {
    // Resize the buffer or handle the error before proceeding
    strbuf_grow(&realpath, required_size - strbuf_avail(&realpath));
}
strbuf_add(&realpath, src->buf, src->len);
strbuf_add(&realpath, dest->buf, dest->len);
