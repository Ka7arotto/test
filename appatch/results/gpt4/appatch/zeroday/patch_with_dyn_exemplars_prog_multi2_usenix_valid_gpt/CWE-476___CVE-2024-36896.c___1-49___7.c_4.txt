diff
< 	struct usb_device *hdev = to_usb_device(dev->parent->parent);
< 	struct usb_hub *hub = usb_hub_to_struct_hub(hdev);
< 	struct usb_interface *intf = to_usb_interface(hub->intfdev);
---
> 	struct usb_device *hdev;
> 	struct usb_hub *hub;
> 	struct usb_interface *intf;
> 	if (!dev || !dev->parent || !dev->parent->parent)
> 	    return handle_error(dev);
> 	hdev = to_usb_device(dev->parent->parent);
> 	if (!hdev)
> 	    return handle_error(dev);
> 	hub = usb_hub_to_struct_hub(hdev);
> 	if (!hub || !hub->intfdev)
> 	    return handle_error(dev);
> 	intf = to_usb_interface(hub->intfdev);
