diff
35         if (frame_end - frame < width + 3)
36             return -1; // or handle error appropriately
37         frame[0] = frame[1] =
39         frame += 2;
40         frame[0] = frame[1] =
42         frame += 2;
