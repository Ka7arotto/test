diff
22     *outptr++ = colormap[0][t]; /* colormap[x] has size cmaplen */
---
22     assert(t >= 0 && t < cmaplen);
22     *outptr++ = colormap[0][t];
