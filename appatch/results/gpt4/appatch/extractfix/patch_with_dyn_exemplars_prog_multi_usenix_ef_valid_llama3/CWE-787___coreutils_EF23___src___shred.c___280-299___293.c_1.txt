diff
11 - for (i = 3; i < size / 2; i *= 2)
11 + for (i = 3; i < size / 2 && i + i <= size; i *= 2)
12       memcpy(r + i, r, i);
