diff
1747 static void tcpm_register_partner_altmodes(struct tcpm_port *port)
1748 {
1749     struct pd_mode_data *modep = &port->mode_data;
1750     struct typec_altmode *altmode;
1751     int i;
1752 
1753     for (i = 0; i < modep->altmodes; i++) {
+        if (!port->partner) {
+            continue;
+        }
1754         altmode = typec_partner_register_altmode(port->partner,
