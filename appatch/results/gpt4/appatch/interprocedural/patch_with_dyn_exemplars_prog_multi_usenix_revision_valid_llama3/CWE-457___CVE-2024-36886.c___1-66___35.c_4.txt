c
// In a hypothetical safe memory API
static inline void safe_free_page(struct page **page, unsigned int order) {
    if (pcp_allowed_order(order) && *page != NULL) {
        free_unref_page(*page, order);
        *page = NULL;  // Ensure the original pointer is set to NULL
    }
}

// Usage
safe_free_page(&page, order);
