c
<   for (sample = 0; (sample < spp) && (sample < MAX_SAMPLES); sample++)
---
>   if (spp > MAX_SAMPLES) {
>       // Handle error or return an error code
>   }
>   for (sample = 0; sample < spp; sample++)
