
<             if (frame_end - frame < width + 3)
---
>             if ((frame + width + 3) > frame_end)
