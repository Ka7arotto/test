
<     for (i = 0; i < cinfo->num_components; i++)
<         cinfo->cur_comp_info[i] = NULL;
---
>     if (cinfo->num_components > MAX_COMPS_IN_SCAN) {
>         // handle error or return an error code
>     }
>     for (i = 0; i < cinfo->num_components; i++)
>         cinfo->cur_comp_info[i] = NULL;
