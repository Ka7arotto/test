
<     for (i = 0; i < cinfo->num_components; i++)
<         cinfo->cur_comp_info[i] = NULL;
---
>     if (cinfo->num_components <= MAX_COMPS_IN_SCAN) {
>         for (i = 0; i < cinfo->num_components; i++)
>             cinfo->cur_comp_info[i] = NULL;
>     } else {
>         // handle error or return an error code
>     }
