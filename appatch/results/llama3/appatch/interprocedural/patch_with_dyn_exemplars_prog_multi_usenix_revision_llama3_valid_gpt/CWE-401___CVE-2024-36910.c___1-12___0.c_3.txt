c
void vmbus_free_ring(struct vmbus_channel *channel)
{
    hv_ringbuffer_cleanup(&channel->outbound);
    hv_ringbuffer_cleanup(&channel->inbound);
    if (channel->ringbuffer_page) {
        __free_pages(channel->ringbuffer_page, /* order */);
        channel->ringbuffer_page = NULL; // Set to NULL to prevent further access
    }
}
