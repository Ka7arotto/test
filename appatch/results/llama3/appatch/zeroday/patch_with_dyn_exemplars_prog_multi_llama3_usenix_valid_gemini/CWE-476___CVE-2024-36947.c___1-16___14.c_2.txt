
< 	simple_recursive_removal(dir, NULL);
---
> 	if (dir != NULL && !IS_ERR(dir)) {
> 		simple_recursive_removal(dir, NULL);
> 	} else {
> 		return -EINVAL;
