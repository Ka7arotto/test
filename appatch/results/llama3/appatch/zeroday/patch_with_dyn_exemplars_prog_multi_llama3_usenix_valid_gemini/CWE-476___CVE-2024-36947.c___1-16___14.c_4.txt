
< 	simple_recursive_removal(dir, NULL);
---
> 	if (dir != NULL && dir->d_inode != NULL) {
> 		simple_recursive_removal(dir, NULL);
> 	} else {
> 		return -EINVAL;
