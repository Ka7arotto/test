c
< 	ret = hclge_pci_init(hdev);
< 	if (ret)
---
> 	ret = hclge_pci_init(hdev);
> 	if (ret) {
> 		hdev = NULL;
> 	}
> 	if (hdev != NULL) {
> 		ret = hclge_devlink_init(hdev);
> 	} else {
> 		ret = -EINVAL;
> 	}
> 	return ret;
