
< 	simple_recursive_removal(dir, NULL);
---
> 	struct dentry *parent = dir->d_parent;
> 	if (parent != NULL) {
> 		simple_recursive_removal(dir, NULL);
> 	} else {
> 		return -EINVAL;
