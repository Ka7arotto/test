diff
- wStream* stream = Stream_StaticConstInit(&sbuffer, pSrcData, SrcSize);
+ wStream* stream = Stream_New(NULL, 0);
+ if (!stream) {
+     WLog_ERR(TAG, "Failed to create stream");
+     goto fail;
+ }
+ if (!Stream_EnsureCapacity(stream, SrcSize)) {
+     WLog_ERR(TAG, "Failed to ensure stream capacity");
+     Stream_Free(stream, TRUE);
+     goto fail;
+ }
+ Stream_Write(stream, pSrcData, SrcSize);
+ Stream_SetPosition(stream, 0);
