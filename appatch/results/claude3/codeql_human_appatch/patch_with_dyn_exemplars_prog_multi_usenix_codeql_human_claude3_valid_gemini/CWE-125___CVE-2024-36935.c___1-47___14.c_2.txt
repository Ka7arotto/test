diff
  if (*ppos != 0 || count > 8)
      return -EINVAL;
+ if (count < 1)
+     return -EINVAL;
  cmd_buf = memdup_user(buf, count);
