diff
  clear_inode(inode);
- filemap_fdatawrite(&inode->i_data);
+ if (inode)
+     filemap_write_and_wait_range(&inode->i_data, 0, LLONG_MAX);
