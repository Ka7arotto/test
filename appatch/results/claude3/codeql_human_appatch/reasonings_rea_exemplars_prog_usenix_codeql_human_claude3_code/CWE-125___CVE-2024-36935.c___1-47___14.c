1 ice_debugfs_module_write(struct file *filp, const char __user *buf,
2 			 size_t count, loff_t *ppos)
4 	struct ice_pf *pf = file_inode(filp)->i_private;
5 	struct dentry *dentry = file_dentry(filp);
6 	struct device *dev = ice_pf_to_dev(pf);
7 	char user_val[16], *cmd_buf;
8 	int module, log_level, cnt;
11 	if (*ppos != 0 || count > 8)
12 		return -EINVAL;
14 	cmd_buf = memdup_user(buf, count);
15 	if (IS_ERR(cmd_buf))
16 		return PTR_ERR(cmd_buf);
18 	module = ice_find_module_by_dentry(pf, dentry);
19 	if (module < 0) {
20 		dev_info(dev, "unknown module\n");
21 		return -EINVAL;
24 	cnt = sscanf(cmd_buf, "%s", user_val);