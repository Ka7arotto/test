diff
-struct typec_altmode *
+int
 typec_partner_register_altmode(struct typec_partner *partner,
 			       const struct typec_altmode_desc *desc)
 {
+    if (!partner)
+        return -EINVAL;
-	return typec_register_altmode(&partner->dev, desc);
+	return typec_register_altmode(&partner->dev, desc) ? 0 : -EFAULT;
 }
