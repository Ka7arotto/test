
<     read_ptr = iwl_txq_get_cmd_index(txq, txq->read_ptr);
---
>     if (iwl_txq_get_cmd_index(txq, txq->read_ptr, &read_ptr) < 0) {
>         IWL_ERR(trans, "Failed to get valid read_ptr for queue %d\n", txq_id);
>         goto out;
>     }
