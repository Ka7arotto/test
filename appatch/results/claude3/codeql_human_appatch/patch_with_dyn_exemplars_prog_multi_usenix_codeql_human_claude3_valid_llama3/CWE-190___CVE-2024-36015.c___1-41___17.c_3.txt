c
static struct pardevice *safe_parport_register_dev_model(struct parport *port, const char *name,
                                                         struct pardev_cb *ppdev_cb, int index) {
    if (index < 0 || index > INT_MAX / 2) {
        pr_warn("%s: invalid index value!\n", name);
        return NULL;
    }
    return parport_register_dev_model(port, name, ppdev_cb, index);
}

// Then use this function instead:
pdev = safe_parport_register_dev_model(port, name, &ppdev_cb, index);
