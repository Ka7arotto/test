diff
9 		qeth_free_qdio_queues(card);
+ 	struct qeth_qdio_out_q **new_qs = krealloc(card->qdio.out_qs, 
+ 		max * sizeof(*card->qdio.out_qs), GFP_KERNEL);
+ 	if (!new_qs) {
+ 		dev_err(&card->gdev->dev, "Failed to reallocate output queues\n");
+ 		return;
+ 	}
+ 	card->qdio.out_qs = new_qs;
14 	card->qdio.no_out_queues = max;
