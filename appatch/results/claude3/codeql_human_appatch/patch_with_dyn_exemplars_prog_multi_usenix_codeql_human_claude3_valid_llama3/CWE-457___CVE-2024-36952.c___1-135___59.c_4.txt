diff
+ bool vport_valid = true;
  fc_remove_host(shost);
  scsi_remove_host(shost);
+ vport_valid = false;

+ if (vport_valid) {
    ndlp = lpfc_findnode_did(vport, Fabric_DID);
+ }
