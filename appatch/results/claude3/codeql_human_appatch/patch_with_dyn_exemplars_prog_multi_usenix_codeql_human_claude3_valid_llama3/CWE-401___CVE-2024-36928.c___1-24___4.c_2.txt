diff
+ static int qeth_init_qdio_queues(struct qeth_card *card, unsigned int max)
+ {
+ 	card->qdio.out_qs = kcalloc(max, sizeof(*card->qdio.out_qs), GFP_KERNEL);
+ 	if (!card->qdio.out_qs)
+ 		return -ENOMEM;
+ 	card->qdio.no_out_queues = max;
+ 	return 0;
+ }

9 		qeth_free_qdio_queues(card);
+ 	if (qeth_init_qdio_queues(card, max)) {
+ 		dev_err(&card->gdev->dev, "Failed to initialize output queues\n");
+ 		return;
+ 	}
- 14 	card->qdio.no_out_queues = max;
