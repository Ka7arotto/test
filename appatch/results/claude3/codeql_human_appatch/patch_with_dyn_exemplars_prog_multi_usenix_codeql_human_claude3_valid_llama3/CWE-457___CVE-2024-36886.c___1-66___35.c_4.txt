diff
+ #define PAGE_FREED 0x1
  static inline void free_the_page(struct page *page, unsigned int order)
  {
+     if (page->flags & PAGE_FREED)
+         return;
      if (pcp_allowed_order(order))        /* Via pcp? */
          free_unref_page(page, order);
      else
          __free_pages_ok(page, order, FPI_NONE);
+     page->flags |= PAGE_FREED;
  }
