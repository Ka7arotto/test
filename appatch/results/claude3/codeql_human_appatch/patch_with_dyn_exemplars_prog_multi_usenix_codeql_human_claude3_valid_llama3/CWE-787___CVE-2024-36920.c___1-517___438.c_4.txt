c
tmplen = min(drv_buf_iter->kern_buf_len, drv_buf_iter->bsg_buf_len);
if (tmplen <= drv_buf_iter->actual_buf_size)
    memcpy_safe(drv_buf_iter->bsg_buf, bsg_reply_buf, tmplen, drv_buf_iter->actual_buf_size);
else
    return -EINVAL;  // Or handle the error appropriately
