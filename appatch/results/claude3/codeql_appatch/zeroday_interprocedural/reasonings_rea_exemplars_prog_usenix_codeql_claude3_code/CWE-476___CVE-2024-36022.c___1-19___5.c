1 void drm_client_register(struct drm_client_dev *client)
3 	struct drm_device *dev = client->dev;
4 	int ret;
6 	mutex_lock(&dev->clientlist_mutex);
7 	list_add(&client->list, &dev->clientlist);
9 	if (client->funcs && client->funcs->hotplug) {
10 		ret = client->funcs->hotplug(client);
11 		if (ret)
12 			drm_dbg_kms(dev, "client hotplug ret=%d\n", ret);
14 	mutex_unlock(&dev->clientlist_mutex);
17 int amdgpu_amdkfd_drm_client_create(struct amdgpu_device *adev)
19 	int ret;
21 	if (!adev->kfd.init_complete)
22 		return 0;
24 	ret = drm_client_init(&adev->ddev, &adev->kfd.client, "kfd",
25 			      &kfd_client_funcs);
26 	if (ret) {
27 		dev_err(adev->dev, "Failed to init DRM client: %d\n",
28 			ret);
29 		return ret;
32 	drm_client_register(&adev->kfd.client);