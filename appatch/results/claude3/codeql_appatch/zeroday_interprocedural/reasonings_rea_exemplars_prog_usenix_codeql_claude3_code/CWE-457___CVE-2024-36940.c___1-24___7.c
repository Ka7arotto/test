1 int pinctrl_enable(struct pinctrl_dev *pctldev)
3 	int error;
5 	error = pinctrl_claim_hogs(pctldev);
6 	if (error) {
7 		dev_err(pctldev->dev, "could not claim hogs: %i\n",
8 			error);
9 		pinctrl_free_pindescs(pctldev, pctldev->desc->pins,
10 				      pctldev->desc->npins);
11 		mutex_destroy(&pctldev->mutex);
12 		kfree(pctldev);
14 		return error;
17 	mutex_lock(&pinctrldev_list_mutex);
18 	list_add_tail(&pctldev->node, &pinctrldev_list);
19 	mutex_unlock(&pinctrldev_list_mutex);
21 	pinctrl_init_device_debugfs(pctldev);