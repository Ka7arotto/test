
< 	if (atomic_read(&card->qdio.state) != QETH_QDIO_UNINITIALIZED)
< 		qeth_free_qdio_queues(card);
---
> 	bool need_free = (atomic_read(&card->qdio.state) != QETH_QDIO_UNINITIALIZED);
> 	/* ... rest of the function ... */
> 	if (need_free)
> 		qeth_free_qdio_queues(card);
