diff
+#include <linux/printk.h>
+
 static inline void free_the_page(struct page *page, unsigned int order)
 {
+    if (!page) {
+        pr_err("Attempted to free NULL page\n");
+        return;
+    }
+
     if (pcp_allowed_order(order))		/* Via pcp? */
         free_unref_page(page, order);
     else
         __free_pages_ok(page, order, FPI_NONE);
 }
