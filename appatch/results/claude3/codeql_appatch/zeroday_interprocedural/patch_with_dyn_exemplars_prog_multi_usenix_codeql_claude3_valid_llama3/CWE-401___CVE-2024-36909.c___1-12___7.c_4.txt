diff
+static inline bool is_valid_channel(struct vmbus_channel *channel)
+{
+    return channel != NULL;
+}
+
 void vmbus_free_ring(struct vmbus_channel *channel)
 {
+    if (!is_valid_channel(channel))
+        return;
     hv_ringbuffer_cleanup(&channel->outbound);
     hv_ringbuffer_cleanup(&channel->inbound);
