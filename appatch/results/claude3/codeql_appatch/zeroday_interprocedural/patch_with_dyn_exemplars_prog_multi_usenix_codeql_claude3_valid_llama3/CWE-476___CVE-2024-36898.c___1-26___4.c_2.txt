
	eflags = edflags & GPIO_V2_LINE_EDGE_FLAGS;
+	if (line == NULL || line->req == NULL)
+		return -EINVAL;
	if (eflags && !kfifo_initialized(&line->req->events)) {
		ret = kfifo_alloc(&line->req->events,
				  line->req->event_buffer_size, GFP_KERNEL);
		if (ret)
			return ret;
	}
