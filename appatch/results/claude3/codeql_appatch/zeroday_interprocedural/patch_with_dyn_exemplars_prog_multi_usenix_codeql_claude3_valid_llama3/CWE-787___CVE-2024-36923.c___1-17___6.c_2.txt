diff
  clear_inode(inode);
- filemap_fdatawrite(&inode->i_data);
+ if (inode && inode->i_data.nrpages)
+     filemap_fdatawrite(&inode->i_data);
