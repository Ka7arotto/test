
< int pinctrl_dt_to_map(struct pinctrl *p, struct pinctrl_dev *pctldev)
< {
<     struct device_node *np = p->dev->of_node;
---
> static int __pinctrl_dt_to_map(struct pinctrl *p, struct pinctrl_dev *pctldev, struct device_node *np)
> {
>     /* Function body */
> }
> 
> int pinctrl_dt_to_map(struct pinctrl *p, struct pinctrl_dev *pctldev)
> {
>     struct device_node *np = p->dev->of_node;
>     int ret;
>     
>     if (!np) {
>         if (of_have_populated_dt())
>             dev_dbg(p->dev, "no of_node; not parsing pinctrl DT\n");
>         return 0;
>     }
>     
>     of_node_get(np);
>     ret = __pinctrl_dt_to_map(p, pctldev, np);
>     of_node_put(np);
>     
>     return ret;
> }
