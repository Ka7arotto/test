diff
   8     struct nfsd4_fattr_args args;
+  9     atomic_t acl_refcount = ATOMIC_INIT(0);
  ...
  91     if (attrmask[0] & FATTR4_WORD0_ACL) {
  92         err = nfsd4_get_nfs4_acl(rqstp, dentry, &args.acl);
+ 93         if (!err && args.acl)
+ 94             atomic_inc(&acl_refcount);
  ...
- 150     kfree(args.acl);
+ 150     if (atomic_dec_and_test(&acl_refcount)) {
+ 151         kfree(args.acl);
+ 152         args.acl = NULL;
+ 153     }
