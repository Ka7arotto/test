diff
+ 	struct cfg80211_coalesce *old_coalesce;
- 	cfg80211_rdev_free_coalesce(rdev);
- 	rdev->coalesce = n_coalesce;
+ 	old_coalesce = xchg(&rdev->coalesce, n_coalesce);
+ 	cfg80211_rdev_free_coalesce(old_coalesce);
