diff
 void vmbus_free_ring(struct vmbus_channel *channel)
 {
+    if (!channel)
+        return;
     hv_ringbuffer_cleanup(&channel->outbound);
     hv_ringbuffer_cleanup(&channel->inbound);
