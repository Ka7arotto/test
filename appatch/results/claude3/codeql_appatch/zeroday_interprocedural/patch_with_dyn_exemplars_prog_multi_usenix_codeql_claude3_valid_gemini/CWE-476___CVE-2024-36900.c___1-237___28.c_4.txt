diff
  ret = hclge_devlink_init(hdev);
  if (ret)
      goto err_pci_uninit;
+ if (!hdev->devlink) {
+     dev_err(&pdev->dev, "devlink not initialized properly\n");
+     ret = -EINVAL;
+     goto err_pci_uninit;
+ }
