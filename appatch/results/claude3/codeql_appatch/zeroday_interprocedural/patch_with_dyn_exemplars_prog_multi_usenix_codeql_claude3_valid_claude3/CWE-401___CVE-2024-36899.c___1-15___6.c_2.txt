c
<     bitmap_free(cdev->watched_lines);
<     blocking_notifier_chain_unregister(&gdev->device_notifier,
<                                        &cdev->device_unregistered_nb);
<     blocking_notifier_chain_unregister(&gdev->line_state_notifier,
<                                        &cdev->lineinfo_changed_nb);
---
>     if (cdev && cdev->watched_lines)
>         bitmap_free(cdev->watched_lines);
>     if (gdev && cdev) {
>         blocking_notifier_chain_unregister(&gdev->device_notifier,
>                                            &cdev->device_unregistered_nb);
>         blocking_notifier_chain_unregister(&gdev->line_state_notifier,
>                                            &cdev->lineinfo_changed_nb);
>     }
