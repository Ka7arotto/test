diff
- 14 	card->qdio.no_out_queues = max;
+ 	unsigned int new_queues = 0;
+ 	for (int i = 0; i < max; i++) {
+ 		if (i >= card->qdio.no_out_queues) {
+ 			card->qdio.out_qs[i] = qeth_alloc_output_queue();
+ 			if (!card->qdio.out_qs[i]) break;
+ 		}
+ 		new_queues++;
+ 	}
+ 	card->qdio.no_out_queues = new_queues;
