diff
-1287                __free_pages(channel->ringbuffer_page,
+1287                channel->ringbuffer_page_to_free = channel->ringbuffer_page;
+1288                channel->ringbuffer_page = NULL;
+1289                schedule_work(&channel->delayed_free_work);
