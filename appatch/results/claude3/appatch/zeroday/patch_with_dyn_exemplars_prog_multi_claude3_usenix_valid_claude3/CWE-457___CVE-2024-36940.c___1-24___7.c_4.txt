
1 int pinctrl_enable(struct pinctrl_dev *pctldev)
2 {
3 	int error;
4 	struct device *dev;
5 
6 	if (atomic_inc_not_zero(&pctldev->use_count) == 0) {
7 		return -EINVAL;
8 	}
9 
10 	dev = pctldev->dev;
11 	error = pinctrl_claim_hogs(pctldev);
12 	if (error) {
13 		dev_err(dev, "could not claim hogs: %i\n", error);
14 		atomic_dec(&pctldev->use_count);
15 		return error;
16 	}
17 
18 	mutex_lock(&pinctrldev_list_mutex);
