c
void safe_truncate_inode_pages(struct inode *inode) {
    if (inode && inode->i_data.nrpages > 0) {
        truncate_inode_pages_final(&inode->i_data);
    }
}

// Usage
safe_truncate_inode_pages(inode);
