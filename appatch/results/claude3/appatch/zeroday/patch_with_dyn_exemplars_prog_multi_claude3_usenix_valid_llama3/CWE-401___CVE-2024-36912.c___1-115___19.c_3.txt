c
bool buffer_freed = false;
ret = create_gpadl_header(type, kbuffer, size, send_offset, &msginfo, &buffer_freed);
if (ret || buffer_freed)
    return ret ? ret : -EFAULT;
