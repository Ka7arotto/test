c
22         struct sk_buff *tmp = *buf;
23         *buf = NULL;
24         if (skb_has_frag_list(tmp) && __skb_linearize(tmp))
25             goto err;
26         tmp = skb_unshare(tmp, GFP_ATOMIC);
27         if (unlikely(!tmp))
28             goto err;
29         head = *headbuf = tmp;
