c
ret = create_gpadl_header(type, kbuffer, size, send_offset, &msginfo);
if (ret) {
    // Handle cleanup here if necessary
    return ret;
}
// Rest of the function...
// At the end of the function or in cleanup:
if (kbuffer) {
    // Properly free kbuffer here
}
