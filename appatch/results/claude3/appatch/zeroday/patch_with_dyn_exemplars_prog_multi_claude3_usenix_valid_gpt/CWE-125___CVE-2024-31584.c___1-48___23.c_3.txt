
<   mobile_ivalue_size_ = module_->mobile_ivalue_size();
<   if (mobile_ivalue_size_ == 0) {
---
>   std::optional<int> size = getSafeMobileIValueSize(module_);
>   if (!size.has_value()) {
>     throw std::runtime_error("Failed to get mobile_ivalue_size");
>   }
>   mobile_ivalue_size_ = size.value();
>   if (mobile_ivalue_size_ == 0) {
