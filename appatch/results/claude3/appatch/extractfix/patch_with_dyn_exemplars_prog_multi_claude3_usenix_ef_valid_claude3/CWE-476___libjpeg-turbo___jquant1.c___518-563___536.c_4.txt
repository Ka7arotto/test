
<   for (row = 0; row < num_rows; row++) {
<     /* Initialize output values to 0 so can process components separately */
<     jzero_far((void *) output_buf[row], (size_t) (width * sizeof(JSAMPLE)));
---
>   if (output_buf == NULL) {
>     /* Log error or set error flag */
>     cinfo->err->msg_code = JERR_BAD_BUFFER_MODE;
>     (*cinfo->err->error_exit) ((j_common_ptr) cinfo);
>   }
>   for (row = 0; row < num_rows; row++) {
>     /* Initialize output values to 0 so can process components separately */
>     jzero_far((void *) output_buf[row], (size_t) (width * sizeof(JSAMPLE)));
