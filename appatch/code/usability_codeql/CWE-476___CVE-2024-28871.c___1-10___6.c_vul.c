void drm_client_register(struct drm_client_dev *client)
{
        struct drm_device *dev = client->dev;
        int ret;

        mutex_lock(&dev->clientlist_mutex);
        list_add(&client->list, &dev->clientlist);

        if (client->funcs && client->funcs->hotplug) {
                ret = client->funcs->hotplug(client);
                if (ret)
                        drm_dbg_kms(dev, "client hotplug ret=%d\n", ret);
        }
        mutex_unlock(&dev->clientlist_mutex);
}

int amdgpu_amdkfd_drm_client_create(struct amdgpu_device *adev)
{
	int ret;

	if (!adev->kfd.init_complete)
		return 0;

	ret = drm_client_init(&adev->ddev, &adev->kfd.client, "kfd",
			      &kfd_client_funcs);
	if (ret) {
		dev_err(adev->dev, "Failed to init DRM client: %d\n",
			ret);
		return ret;
	}

	drm_client_register(&adev->kfd.client);

	return 0;
}
